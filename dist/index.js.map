{"version":3,"file":"index.js","sources":["../src/index.ts"],"sourcesContent":["import { useCallback, useEffect, useState } from \"react\";\n\nexport interface faviconFns {\n  triggerNotification: () => void;\n  clearNotification: () => void;\n}\n\nexport interface faviconOptions {\n  icon?: string;\n  emoji?: string;\n  awayEmoji?: string;\n}\n\nconst useFavicon = ({ icon, emoji, awayEmoji }: faviconOptions): faviconFns => {\n  const [isNotification, setIsNotification] = useState(true);\n  const [isAway, setIsAway] = useState(false);\n\n  useEffect(() => {\n    const favicon = document.querySelector(\"link[rel='icon']\");\n    if (!favicon) return;\n    if (icon) favicon.setAttribute(\"href\", icon);\n  }, [isNotification]);\n\n  useEffect(() => {\n    const favicon = document.querySelector(\"link[rel='icon']\");\n    if (!favicon) return;\n    if (emoji) {\n      favicon.setAttribute(\n        \"href\",\n        `data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\"><text y=\".9em\" font-size=\"90\">${\n          isAway ? awayEmoji : emoji\n        }</text></svg>`\n      );\n    }\n  }, [isAway]);\n\n  useEffect(() => {\n    const toggleIsAway = () => setIsAway((prev) => !prev);\n    document.addEventListener(\"visibilitychange\", toggleIsAway);\n  }, []);\n\n  return {\n    triggerNotification: useCallback(() => setIsNotification(true), []),\n    clearNotification: useCallback(() => setIsNotification(false), []),\n  };\n};\n\nexport default useFavicon;\n"],"names":["useState","useEffect","useCallback"],"mappings":";;;;IAaM,UAAU,GAAG,UAAC,EAA0C;QAAxC,IAAI,UAAA,EAAE,KAAK,WAAA,EAAE,SAAS,eAAA;IACpC,IAAA,KAAsCA,cAAQ,CAAC,IAAI,CAAC,EAAnD,cAAc,QAAA,EAAE,iBAAiB,QAAkB,CAAC;IACrD,IAAA,KAAsBA,cAAQ,CAAC,KAAK,CAAC,EAApC,MAAM,QAAA,EAAE,SAAS,QAAmB,CAAC;IAE5CC,eAAS,CAAC;QACR,IAAM,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,kBAAkB,CAAC,CAAC;QAC3D,IAAI,CAAC,OAAO;YAAE,OAAO;QACrB,IAAI,IAAI;YAAE,OAAO,CAAC,YAAY,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;KAC9C,EAAE,CAAC,cAAc,CAAC,CAAC,CAAC;IAErBA,eAAS,CAAC;QACR,IAAM,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,kBAAkB,CAAC,CAAC;QAC3D,IAAI,CAAC,OAAO;YAAE,OAAO;QACrB,IAAI,KAAK,EAAE;YACT,OAAO,CAAC,YAAY,CAClB,MAAM,EACN,6HACE,MAAM,GAAG,SAAS,GAAG,KAAK,mBACb,CAChB,CAAC;SACH;KACF,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC;IAEbA,eAAS,CAAC;QACR,IAAM,YAAY,GAAG,cAAM,OAAA,SAAS,CAAC,UAAC,IAAI,IAAK,OAAA,CAAC,IAAI,GAAA,CAAC,GAAA,CAAC;QACtD,QAAQ,CAAC,gBAAgB,CAAC,kBAAkB,EAAE,YAAY,CAAC,CAAC;KAC7D,EAAE,EAAE,CAAC,CAAC;IAEP,OAAO;QACL,mBAAmB,EAAEC,iBAAW,CAAC,cAAM,OAAA,iBAAiB,CAAC,IAAI,CAAC,GAAA,EAAE,EAAE,CAAC;QACnE,iBAAiB,EAAEA,iBAAW,CAAC,cAAM,OAAA,iBAAiB,CAAC,KAAK,CAAC,GAAA,EAAE,EAAE,CAAC;KACnE,CAAC;AACJ;;;;"}